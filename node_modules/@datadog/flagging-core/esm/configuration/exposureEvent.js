export function createExposureEvent(context, details) {
    var _a, _b;
    // Only log if doLog flag is true
    if (!((_a = details.flagMetadata) === null || _a === void 0 ? void 0 : _a.doLog)) {
        return;
    }
    // Skip logging if allocation key or variant is missing (this should never happen)
    const allocationKey = (_b = details.flagMetadata) === null || _b === void 0 ? void 0 : _b.allocationKey;
    const variantKey = details.variant;
    if (!allocationKey || !variantKey) {
        return;
    }
    const { targetingKey: id = '', ...attributes } = context;
    return {
        allocation: {
            key: allocationKey,
        },
        flag: {
            key: details.flagKey,
        },
        variant: {
            key: variantKey,
        },
        subject: {
            id,
            attributes,
        },
    };
}
//# sourceMappingURL=exposureEvent.js.map